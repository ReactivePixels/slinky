build: off

os: unstable

platform:
  - x64

branches:
  only:
    - master

shallow_clone: true

skip_tags: true
#skip_non_tags: true
#skip_branch_with_pr: true

environment:
  nodejs_version: "6.3.0"

cache:
  - node_modules -> package.json

install:
  - ps: $fileContent = "-----BEGIN RSA PRIVATE KEY-----`n"
  - ps: $fileContent += $env:priv_key.Replace(' ', "`n")
  - ps: $fileContent += "`n-----END RSA PRIVATE KEY-----`n"
  - ps: Set-Content c:\users\appveyor\.ssh\id_rsa $fileContent
  - ps: Install-Product node $env:nodejs_version
  - npm install
  - npm prune

test_script:
  - node --version
  - npm --version
  - npm test
  - npm run e2e

deploy:
  release: slinky-v1.0.0
  description: 'Slinky'
  provider: releases
  auth_token:
    secure: DJxWhinkQ5MS4/yiN32iFSfDF9z7wuRPRB3ZLhnEvO4Pe0jTn9PeoeiGYl4xpCHqiuZG2wHWvNd7WuAzmtVxTn3HqD166Smc/Do8LhswhiKpGOsi3J6jStUd7uG5Cihol5zGx5lLeal6KiOGHU1FOhxaJ+UrSStgkDemO6+pzvWX3S8cUhmWRbcBEubWXyCFjKJu26LZAamqXF8UqsQT+B+qA5Rzuh8UsuC1jMcLS9XUnwQYFTtN5p5HYBiqM0/vcdm2DaWGVF+yxEYuSf8O81I+NNbZB74QTotaE9VRBAsJNxOGP5+Y+t/Wo2X91b4CojrMf0kKuKYWjuPYJh2xEBPYYAyMp72WFYRKyzcvdqk6zyLUFozM9RjW54wIoOWchg3JsGhktimFG/RPVz/6zWbeZUuNkt68VG99vsWr6lATs3HMYRC5tDpEZBK05SRfAdGc1kax3osR4/Wsd+xh2/FAUyTu+GAyq1TP/7gYDHTzS7XUM5MCK9G1KNdaLIm7b27tM6+5BvnKe1RuyVjr3StVDRmyPecBwm75LETaPgX3A8B47dAq+C0rSyfkmTZTWeKixxFllpztT267v+XUNqIy4XgI1m8O3bxp6yqw+M69zbwKT57GF3++uv7BzfQFSx4lxUYOK1y0oQfSlQqtbX37mD120BZLgvFArUoj4t8=
  artifact: dist/**/*.exe
  draft: false
  prerelease: false
#  on:
#    branch: master                 # release from master branch only
#    appveyor_repo_tag: true        # deploy on tag push only

